let imageArr = [
    {
        id: 0,
        src:`https://gdb.rferl.org/f3d3d8da-dda8-4296-b388-45d416f58f98.png?fbclid=IwAR39lMumh1hBWkh14kV_krQk2n8kP5DDlanArBiaCXNDogRz8GHBC52BV1E`,
        justName:`გიო`,
        name:`გიო სულაშვილი `,
        age:`30 წლის`,
        videoSrc:`https://www.youtube.com/embed/tgbNymZ7vqY?controls=0`,
        paragraph:`თვალის დაკარგვიდან ერთი წლის შემდეგ გიორგი ამბობს, რომ მისთვის ყველაზე რთული ამ დროის განმავლობაში ის დღეები იყო 
            როცა შვილის საქართველოში მარტო დატოვება და სამკურნალოდ გერმანიაში წასვლა ჭირდებოდა. 
            უკან დაბრუნებულს ბავშვი კარს უკეტავდა და არსად უშვებდა იმის შიშით, 
            რომ კიდევ ხანგრძლივად მოუწევდა მშობლების გარეშე ყოფნა. აქციაზე 20 ივნისს, 10-ის ნახევარზე სახლიდან წავიდა 
            და რუსთაველზე თანამშრომლების, ტელეკომპანია რუსთავი 2-ის გადამღებ ჯგუფებთან ახლოს ტრიალებდა. 
            სხვადასხვა ჩვენებების მიხედვით, მედიის წარმომადგენლები განსაკუთრებული სამიზნე იყო სამართალდამცველთა ტყვიებისთვის - 
            გიორგის თვალის გარდა ტყვიის მოხვედრის შემდეგ დაზიანებული ჰქონდა სახის ძვლები და რბილი ქსოვილი. 
            გაკეთებული 4 ოპერაციის მიუხედავად, წინ კიდევ რამდენიმე ოპერაცია აქვს, 
            სანამ სახე ჩვეულ ფორმას მიიღებს და თვალის პროთეზს მოირგებს.
            პატარა თეთრი სახვევი უკვე ერთი წელია მისი სახის “ნაწილი” გახდა. 
        `
    },
    {
        id: 1,
        src: `https://gdb.rferl.org/5ae0f04c-4f8b-4065-b18c-35f343cc905e.png?fbclid=IwAR2-PYEEg3LwPGSs_uThOzqRP1k9ERuGxKxRKluTIpv26xIIJb_NNJV1tGw`,
        name:`მაკო გომური `,
        age:`19 წლის`,
        justName:`მაკო`,
        videoSrc:`https://www.youtube.com/embed/wzQDgvDR5Js`,
        paragraph: `2019 წლის სექტემბერში მაკო გომურმა ყოფილ შინაგან საქმეთა მინისტრს და მოქმედ პრემიერ-მინისტრს, 
        გიორგი გახარიას წერილი მიწერა, სადაც კითხულობდა, რატომ იყო თავისუფალი ადამიანი, 
        რომელმაც თვალი გამოთხარა და ზაფხული ჯოჯოხეთად უქცია და რანაირად შეძლებდა მთავრობის მეთაური ქვეყნის მართვას, 
        თუკი უდანაშაულო ხალხის უსაფრთხოებაზე არ იზრუნებდა. მაკომ გიორგი გახარიას ისეთივე სამართლიანი მომავალი უსურვა, 
        როგორიც თვითონაა. იმ დღეს პრემიერ-მინისტრმა თქვა, რომ მაკო გომურთან ურთიერთობას თვითონ გაარკვევდა - 2019 წელს მაკო ამბობდა, 
        რომ მას შეხვდებოდა და სხვა კითხვებსაც დაუსვამდა, 2020 წელს ამ შეხვედრის აზრს ვეღარ ხედავს. 

        პირველ საპროტესტო აქციაზე დაკარგული თვალის შემდეგ რამდენიმე ოპერაცია გაიკეთა, დაზარალებულის სტატუსი თვეების შემდეგ მიანიჭა 
        სახელმწიფომ - წინაა სამართლებრივი დავა მორალური და ფიზიკური ზიანის დასადგენად და კომპენსაციის მისაღებად.`
    },
    {
        id: 2,
        src: `https://gdb.rferl.org/8b657811-891d-4ec9-ad75-b0ada32693e7.png?fbclid=IwAR1QdxEkIMTCg1Zh4a3yvCYTK_aJ_gnNHCA97a2WEUG7V713Pflp4oUpFSU`,
        name:`კობა ლეთოდიანი`,
        age:`51 წლის`,
        justName:`კობა`,
        videoSrc:``,
        paragraph: `კობა ლეთოდიანმა პირველი თვალი აფხაზეთის ომში დაკარგა, მეორე, საღად გადარჩენილ თვალში 20 ივნისის რეზინის 
        4 ტყვია მოხვდა და მდგომარეობა იმდენად რთული იყო, რომ თითქმის ერთი თვე ტყვიებთან ერთად იცხოვრა. 
        ექიმები თვალის სრულად დაშლის შიშით სხეულიდან ტყვიებს ვერ იღებდნენ. 

        კობა ამბობს, როცა აფხაზეთში ვიბრძოდი, ჩემს მტრებს სერგეი გავრილოვი ფულით და იარაღით ეხმარებოდა და მაშინ ვერასოდეს წარმოვიდგენდი, 
        თუ რუს კომუნისტ დეპუტატს იმ ადგილას ვნახავდი, სადაც საქართველოს დამოუკიდებლობის აქტი მივიღეთო. 
        
        სახელმწიფო კობა ლეთოდიანს დაზარალებულად არ თვლის.`
    },
    {
        id: 3,
        src: `https://gdb.rferl.org/ba0d428f-12bd-4a0c-96b6-8e909228631c.png?fbclid=IwAR3Il5BpjF_k3KgA0O_pALG1VHLcr5-NfeaNGEm8x9P85LJZLOteaCeI160`,
        name:`დავით ფარადაშვილი `,
        age:`32 წლის`,
        justName:`დავითი`,
        videoSrc:`https://www.youtube.com/embed/_0xYJ1y4xQE`,
        paragraph: `დავით ფარადაშვილი 20 ივნისს სახლიდან გავიდა, აქციაზე წავიდა და იმის შემდეგ თითქმის მთელი წელი სხვადასხვა 
        კლინიკაში მოუწია ცხოვრებამ - სახლში 2020 წლის გაზაფხულზე დაბრუნდა, როცა პანდემიის პირობებში კლინიკებმა საწოლების 
        გათავისუფლება დაიწყეს. თავში მოხვედრილმა ცრემლსადენი აირის ყუმბარამ თავის ქალა დაუზიანა, ტრავმის შედეგად პარალიზებული 
        აქვს მარცხენა ხელი და ფეხი. 

        დავითს არ აქვს დაზარალებულის სტატუსი, ის არ არის დაკითხული 20 ივნისთან დაკავშირებული გამოძიების ფარგლებში, 
        მიუხედავად აქციის შედეგად შეზღუდული შესაძლებლობისა, არ იღებს ინვალიდის პენსიას და არ იცის საკუთარი დიაგნოზი - შიშობს, 
        მისი “ზედმეტი” აქტიურობის გამო სახელმწიფომ უარი არ თქვას მკურნალობის დაფინანსებაზე, რაც ასე მნიშვნელოვანია იმისთვის, 
        რომ ისევე დამოუკიდებლად შეძლოს ცხოვრება და გადაადგილება, როგორც 20 ივნისამდე. 
        
        დავითი მებაღეა. სანამ ის საკუთარი სახლის აივანზე ეტლში ზის, დედა და მისი მეგობრები უვლიან მის გახარებულ ყვავილებს. 
        ეს ყვავილები იყო მისთვის შემოსავლის წყარო და ახლა, როცა ეზოდან ვერ გადის, კლიენტებმაც იკლო და შემოსავალმაც.
        `
    },
    {
        id: 4,
        src: `https://gdb.rferl.org/79354151-5f9b-452a-a6c1-22c13a2515ea.png?fbclid=IwAR0oRM4M-XDC99Kx0qBx4GV5bbSfKx-Sa4XkxbIiA87exxgJ6itQYox9dI0`,
        name:`დავით ქურდოვანიძე`,
        age:`21 წლის`,
        justName:`დავითი`,
        videoSrc:``,
        paragraph: `დავითი აქციაზე რამდენჯერმე მივიდა და ტყვია თვალში გამთენიისას, დილის 4 საათისთვის მოხვდა ოპერის სიახლოვეს. 
        როგორც თვითონ ჰყვება, სხვებს გამოსვლაში ეხმარებოდა, გარშემო ცრემლსადენი აირისგან დატრიალებული კვამლი იყო. 
        თავიდან არსებობდა მხედველობის შენარჩუნების იმედი - 5 ოპერაციის შემდეგ, როცა თვალი ძვლის ნამსხვრევებისგან უკვე გაწმენდილია
        და თვალსაც ნორმალური ფორმა დაბრუნებული აქვს, დავითი დაზიანებული თვალით მხოლოდ სინათლეს ხედავს. 
        ფეისბუქზე თითქმის ერთი წელია იმ სისხლიანი ჯინსის ჟილეტის ფოტო აქვს დაყენებული, რომელიც აქციის ღამეს ეცვა. `
    }
    
]
let hortName;
$(document).ready(function() {
    getPersonInfo(imageArr);
});



function getPersonInfo(imageArr){
    let mainDiv=document.getElementsByClassName("main_page");
    let eachMU;
    for(let i=0;i<imageArr.length;i++){
        let eachMU=drawEachPerson(i);
        $(mainDiv).append(eachMU);
    }

}

function drawEachPerson(i){
    if(imageArr[i]){
        let eachPerson = `
            <aside class="eachPerson_MU " >
                <div class="img-hover-zoom"   >
                    <a  class="click_new_page" id='${i}'>
                        <img  src="${imageArr[i].src}">
                    </a>
                </div>
                <div class="person_info" >${imageArr[i].name}</div>
                <div class="person_age" >${imageArr[i].age}</div>
                <button class="person_button click_new_page" id='${i}' >${imageArr[i].justName}ს ისტორია</button>
            </aside>
        `
        return eachPerson;
    }
}

function drawPersonalPage(currentImg,currentName,currentParagraph){
    let personalPage = `
        <aside class="left_side">
            <img class="" src="${currentImg}">
        </aside>
        <aside class="right_side">
            <div>
                <h2>${currentName}</h2>
                <aricle class="description">${currentParagraph}</aricle>
            </div>

        </aside>
    `
    return personalPage;
}

function RemoveLastDirectoryPartOf(){
    var url= window.location.href; 
    var the_arr = url.split('/');
    the_arr.pop();
    let newLocation = the_arr.join('/') + '/personPage.html';
    return(newLocation);
}

$(".main_page").on('click', '.click_new_page', function(mainDiv) {
    let openNewPage=RemoveLastDirectoryPartOf();
    window.open(`${openNewPage}`, '_self');
    let currentId=$(this).attr('id');
    const setCurrentId=localStorage.setItem("currentId",currentId);
});

function drawPersonalPage(i,currentImg,currentName,currentParagraph,currentAge){
    let personalPage = `
        <aside class="left_side">
            <img class="" src="${currentImg}">
        </aside>
        <aside class="right_side">
            <div class="common-div">
                <div  class="buttons"> 
                    <a  class="btn btn-1" href="index.html">
                        <svg>
                            <rect x="0" y="0" fill="none" width="100%" height="100%"/>
                        </svg>
                        <span>&#10229;</span>
                        5 ამბავი
                    </a>
                </div>
                <h2>${currentName}, ${currentAge}  </h2>
                <i class="fa fa-video-camera" id="myBtn" data-id="${i}" aria-hidden="true"></i>
                
                <aricle class="description">${currentParagraph}</aricle>
            </div>

        </aside>
    `
    return personalPage;
}

$(document).ready(function () {
    let iframeClass=document.querySelector(".iframe");
    let url = window.location.href;
    url = url.substring(url.lastIndexOf('/') + 1, url.lastIndexOf('.'));
    if(url === "personPage"){
        const getCurrentId=parseInt(localStorage.getItem("currentId"));
        let mainDiv1=document.getElementById("personal_page");
        let i,currentImg,currentName,currentParagraph,personalMU;
        for(i = 0; i < imageArr.length; i++){
            if(getCurrentId==imageArr[i].id){
                currentImg=imageArr[i].src;
                currentAge=imageArr[i].age;
                currentName=imageArr[i].name;
                currentParagraph=imageArr[i].paragraph;
                personalMU=drawPersonalPage(i,currentImg,currentName,currentParagraph,currentAge);
                $(mainDiv1).append(personalMU);
            }
        }
    }
    modalBoxFunc(iframeClass);
});

function modalBoxFunc(iframeClass){
    let currentDataId=parseInt($("#myBtn").attr("data-id"));
    console.log("currentDataId",currentDataId)
    let modal = document.getElementById("myModal");
    let btn = document.getElementById("myBtn");
    let span = document.getElementsByClassName("close")[0];
    btn.onclick = function() {
        modal.style.display = "block";
       
        for(i = 0; i < imageArr.length; i++){
            if(currentDataId==imageArr[i].id){
                $(iframeClass).attr("src",`${imageArr[i].videoSrc}`);
            }
        }
    }
    span.onclick = function() {
        modal.style.display = "none";
       
    }
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
}
// Get the modal


// $(".fa-video-camera").click(function() {

// });






